<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#a8e6cf" />
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <title>Predictor de Nabos - Animal Crossing</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <div class="container">
    <header>
      <h1>ðŸ¥• Predictor de Nabos</h1>
      <p class="subtitle">Animal Crossing: New Horizons</p>
    </header>

    <div class="main-content">
      <section class="upper-container">
        <section class="inputs-section">
          <!-- SecciÃ³n de precio de compra -->
          <div class="buy-price-group">
            <h2 class="buy-price-title">Precio de compra <small>(Domingo)</small></h2>
            <section class="buy-price-section">
              <div class="input-group">
                <input type="number" id="buyPrice" placeholder="Ej: 92" min="90" max="110">
                <span class="bayas">bayas</span>
              </div>
              <small class="helper-text">Conocer el precio es la base para hacer todos los cÃ¡lculos.</small>
            </section>
          </div>

          <!-- SecciÃ³n de patrÃ³n anterior -->
           <div class="previous-pattern-group">
             <h2 class="previous-pattern-title">PatrÃ³n de la semana anterior <small>(opcional)</small></h2>
             <section class="previous-pattern-section">
               <div class="input-group">
                 <select id="previousPattern">
                   <option value="">No sÃ© / Primera semana</option>
                   <option value="fluctuating">Fluctuante</option>
                   <option value="large_spike">Pico Grande</option>
                   <option value="decreasing">Decreciente</option>
                   <option value="small_spike">Pico PequeÃ±o</option>
                 </select>
               </div>
               <small class="helper-text">Conocer el patrÃ³n anterior mejora significativamente la precisiÃ³n</small>
             </section>
           </div>
        </section>

        <!-- SecciÃ³n de precios de la semana -->
        <section class="week-prices-section">
          <h2>Precios de la semana</h2>
          <div class="prices-grid">
            <div class="day-group">
              <h3>Lunes</h3>
              <div class="price-input">
                <label>AM</label>
                <input type="number" id="mon_am" placeholder="-" min="9" max="660">
                <span class="rate-badge" data-for="mon_am"></span>
              </div>
              <div class="price-input">
                <label>PM</label>
                <input type="number" id="mon_pm" placeholder="-" min="9" max="660">
                <span class="rate-badge" data-for="mon_pm"></span>
              </div>
            </div>

            <div class="day-group">
              <h3>Martes</h3>
              <div class="price-input">
                <label>AM</label>
                <input type="number" id="tue_am" placeholder="-" min="9" max="660">
                <span class="rate-badge" data-for="tue_am"></span>
              </div>
              <div class="price-input">
                <label>PM</label>
                <input type="number" id="tue_pm" placeholder="-" min="9" max="660">
                <span class="rate-badge" data-for="tue_pm"></span>
              </div>
            </div>

            <div class="day-group">
              <h3>MiÃ©rcoles</h3>
              <div class="price-input">
                <label>AM</label>
                <input type="number" id="wed_am" placeholder="-" min="9" max="660">
                <span class="rate-badge" data-for="wed_am"></span>
              </div>
              <div class="price-input">
                <label>PM</label>
                <input type="number" id="wed_pm" placeholder="-" min="9" max="660">
                <span class="rate-badge" data-for="wed_pm"></span>
              </div>
            </div>

            <div class="day-group">
              <h3>Jueves</h3>
              <div class="price-input">
                <label>AM</label>
                <input type="number" id="thu_am" placeholder="-" min="9" max="660">
                <span class="rate-badge" data-for="thu_am"></span>
              </div>
              <div class="price-input">
                <label>PM</label>
                <input type="number" id="thu_pm" placeholder="-" min="9" max="660">
                <span class="rate-badge" data-for="thu_pm"></span>
              </div>
            </div>

            <div class="day-group">
              <h3>Viernes</h3>
              <div class="price-input">
                <label>AM</label>
                <input type="number" id="fri_am" placeholder="-" min="9" max="660">
                <span class="rate-badge" data-for="fri_am"></span>
              </div>
              <div class="price-input">
                <label>PM</label>
                <input type="number" id="fri_pm" placeholder="-" min="9" max="660">
                <span class="rate-badge" data-for="fri_pm"></span>
              </div>
            </div>

            <div class="day-group">
              <h3>SÃ¡bado</h3>
              <div class="price-input">
                <label>AM</label>
                <input type="number" id="sat_am" placeholder="-" min="9" max="660">
                <span class="rate-badge" data-for="sat_am"></span>
              </div>
              <div class="price-input">
                <label>PM</label>
                <input type="number" id="sat_pm" placeholder="-" min="9" max="660">
                <span class="rate-badge" data-for="sat_pm"></span>
              </div>
            </div>
          </div>
        </section>
      </section>
      <div class="button-group">
        <button id="calculateBtn" class="btn-primary">Calcular PronÃ³stico</button>
        <button id="shareBtn" class="btn-share">Compartir</button>
        <button id="clearBtn" class="btn-clear">Limpiar</button>
        <a class="btn-coffee" href="https://www.buymeacoffee.com/luisAzcuaga">
          <img src="https://img.buymeacoffee.com/button-api/?text=Buy me a coffee&emoji=â˜•&slug=luisAzcuaga&button_colour=FFDD00&font_colour=000000&font_family=Cookie&outline_colour=000000&coffee_colour=ffffff" />
        </a>
      </div>

      <!-- SecciÃ³n de resultados -->
      <section class="results-section" id="resultsSection" style="display: none;">
        <h2>ðŸ“Š PronÃ³stico</h2>

        <div class="results-grid">
          <!-- Columna izquierda: 2/3 - Info del patrÃ³n -->
          <div class="results-main">
            <div class="chart-container">
              <h3>ðŸ“ˆ Tendencia de Precios</h3>
              <canvas id="priceChart"></canvas>
            </div>

            <div class="debug-info" id="debugInfo">
            </div>
          </div>

          <!-- Columna derecha: 1/3 - Panel de confianza -->
           <!-- TODO: Remove this confidence panel, it's superseded by probability-distribution -->
          <div class="confidence-panel" id="confidencePanel">
          </div>
        </div>
      </section>
    </div>

    <footer>
      <p>ðŸ’¡ Consejo: Actualiza los precios a medida que los descubres para obtener predicciones mÃ¡s precisas</p>
      <p class="credits">Hecho con ðŸ’š para jugadores de Animal Crossing</p>
    </footer>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="/lib/turnip-pattern-predictor.js" type="module"></script>
  <script src="/lib/ui/controller.js" type="module"></script>
</body>

</html>